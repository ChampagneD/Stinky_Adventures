<!DOCTYPE html>
<html>
  <head>

	<script src="http://canvasengine.net/cdn/dev/canvasengine-latest.all.min.js"></script>

	<script src="Tiled.js"></script>

	<script src="core/Main.js"></script>
	
	<script src="core/game/Interpreter.js"></script>
	<script src="core/game/Game_Plugin.js"></script>
	<script src="core/game/Game_System.js"></script>
	<script src="core/game/Game_Switches.js"></script>
	<script src="core/game/Game_Variables.js"></script>
	<script src="core/game/Game_SelfSwitches.js"></script>
	<script src="core/game/Game_CommonEvents.js"></script>

	<script src="core/game/Game_Map.js"></script>
	<script src="core/game/Game_Character.js"></script>
	<script src="core/game/Game_Player.js"></script>
	
	<script src="core/game/Game_Event.js"></script>
	<script src="core/game/Game_Actor.js"></script>
	<script src="core/game/Game_Save.js"></script>
	<script src="core/sprite/Sprite.js"></script>
	<script src="core/sprite/Sprite_Plugin.js"></script>
	<script src="core/sprite/Spriteset_Map.js"></script>
	<script src="core/sprite/Sprite_Character.js"></script>

	<style>
		html, body {
			width: 100%;
			height: 100%;
			margin: 0px;
			border: 0;
			overflow: hidden; /*  Disable scrollbars */
			display: block;  /* No floating content on sides */
		}
	</style>
	
	<script>
	
		RPGJS.Materials = {
			"characters": {
				"1": "event1.png",
				"2": "event2.png"
			},
			"tilesets": {
				"1": "tileset.png"
			}
		};
	
		RPGJS.Database = {
			"actors": {
				"1": {
					"graphic": "1"
				}
			},
			"tilesets": {
				"1": {
					"graphic": "1"
				}
			},
			"map_infos": {		
				"1": {
					"tileset_id": "1"
				},
				"2": {
					"tileset_id": "1"
				},
				"3": {
					"tileset_id": "1"
				}
			}
		};
	
		RPGJS.defines({
			canvas: "canvas",
			autoload: false,
			scene_path: "../",
			tiled: true
		}).ready(function() {
		
			RPGJS.Player.init({
				actor: 1,
				start: {x: 5, y: 5, id: 3}
			});
			
			RPGJS.Scene.map(function() {
				
				var e = RPGJS.Map.createEvent("EV-1", 3, 3);
				
				e.addPage({
					"trigger": "action_button",
					"type": "fixed",
					"graphic": "2"
				}, [
					"TRANSFER_PLAYER: {'position-type': 'constant', 'appointement': {'x':1,'y': 1, 'id':2}}"
				]);
				
				e.display();
				
			});
		});
	
	</script>
		
		
		
 </head>
  <body>
  
	<canvas id="canvas"></canvas>

	<script>
		(function() {
			var 
				// Obtain a reference to the canvas element
				// using its id.
				htmlCanvas = document.getElementById('canvas')
			
			  	// Obtain a graphics context on the
			  	// canvas element for drawing.
			  	context = htmlCanvas.getContext('2d');
 
			// Start listening to resize events and
			// draw canvas.
			initialize();
 
			function initialize() {
				// Register an event listener to
				// call the resizeCanvas() function each time 
				// the window is resized.
				window.addEventListener('resize', resizeCanvas, false);
				
				// Draw canvas border for the first time.
				resizeCanvas();
			}
				
			// Display custom canvas.
			// In this case it's a blue, 5 pixel border that 
			// resizes along with the browser window.					
			function redraw() {
				context.strokeStyle = 'blue';
				context.lineWidth = '5';
				context.strokeRect(0, 0, window.innerWidth, window.innerHeight);
			}
		
			// Runs each time the DOM window resize event fires.
			// Resets the canvas dimensions to match window,
			// then draws the new borders accordingly.
			function resizeCanvas() {
				htmlCanvas.width = window.innerWidth;
				htmlCanvas.height = window.innerHeight;
				redraw();
			}
		
		})();
	</script>
	
  </body>
</html>